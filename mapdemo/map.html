<html>

<head>
<meta charset="utf-8">
<title>Map Demo</title>
<style>
body {
  background-color: black;
}

#mapphoto {
  position: absolute;
  top: 60px;
  left: 30px;
  width: 2738px;
}

.tile {
  position: absolute;
  background-color: rgba(255,255,255,0.0);
}

.tile:hover {
  position: absolute;
  background-color: rgba(255,255,255,0.3);
}

.tile:focus {
  position: absolute;
  background-color: rgba(255,255,255,0.5);
}
</style>
</head>

<body>
<img src="map.png" id="mapphoto" alt="" />

<script type="text/javascript">
  const x0 = 300;
  const y0 = 80;

  const xhr = new XMLHttpRequest();
  const url = 'http://localhost:3000';
  xhr.addEventListener('readystatechange', () => {
    if( xhr.readyState === 4 && xhr.status === 200) {
      if (xhr.responseText.slice(0, 1) === '[') {
        setButtons(xhr.responseText);
      }
    }
  });

  function send(s)
  {
    console.log(url + s);
    xhr.open( 'get', url + s);
    xhr.send();
  }

  for (let r = 0; r < 6; r++) {
    for (let c = 0; c < 8; c++) {
      let div = document.createElement('div');
      let w = 250 + r * 4;
      let h = 220;
      let m = 30;
      div.className = 'tile';
      div.tabIndex = '0';
      div.style.left = String(x0 + c * (w + m) - r * 10) + 'px';
      div.style.top = String(y0 + r * (h + m)) + 'px';
      div.style.width = String(w) + 'px';
      div.style.height = String(h) + 'px';
      div.onclick = () => {
        console.log(`/pad/${r}${c} clicked`);
        send(`/pad/${r}${c}`);
      };
      document.querySelector('body').appendChild(div);
    }
  }
</script>

</body>
</html>


